/*
  # Create posts table for the blog

  1. New Tables
    - `posts`
      - `id` (uuid, primary key)
      - `slug` (text, unique)
      - `title` (text)
      - `excerpt` (text)
      - `content` (text)
      - `cover_url` (text)
      - `category` (text)
      - `read_time` (int)
      - `published_at` (timestamp with time zone)
      - `views` (int, default 0)
      - `created_at` (timestamp with time zone, default now())
      
  2. Security
    - Enable RLS on `posts` table
    - Add policy for public to read posts
    - Add policy for authenticated users to update view counts
*/

-- Create posts table
CREATE TABLE IF NOT EXISTS posts (
  id uuid PRIMARY KEY DEFAULT gen_random_uuid(),
  slug text UNIQUE NOT NULL,
  title text NOT NULL,
  excerpt text NOT NULL,
  content text NOT NULL,
  cover_url text NOT NULL,
  category text NOT NULL,
  read_time int NOT NULL,
  published_at timestamptz NOT NULL DEFAULT now(),
  views int NOT NULL DEFAULT 0,
  created_at timestamptz NOT NULL DEFAULT now()
);

-- Create function to increment view count
CREATE OR REPLACE FUNCTION increment_post_view(post_slug text)
RETURNS void AS $$
BEGIN
  UPDATE posts
  SET views = views + 1
  WHERE slug = post_slug;
END;
$$ LANGUAGE plpgsql SECURITY DEFINER;

-- Enable Row Level Security
ALTER TABLE posts ENABLE ROW LEVEL SECURITY;

-- Create policy for public read access
CREATE POLICY "Allow public read access to posts"
  ON posts
  FOR SELECT
  TO public
  USING (true);

-- Create policy for authenticated users to update view count
CREATE POLICY "Allow authenticated update of post views"
  ON posts
  FOR UPDATE
  TO authenticated
  USING (true)
  WITH CHECK (true);

-- Insert sample data
INSERT INTO posts (title, slug, excerpt, content, cover_url, category, read_time, published_at)
VALUES 
  (
    'Как AI-автоматизация увеличивает продажи в WhatsApp на 45%',
    'ai-sales-automation',
    'Разбор трёх кейсов клиентов Gneiro, которые внедрили автоматизацию продаж',
    '## Автоматизация продаж через WhatsApp

WhatsApp стал основным каналом для бизнес-коммуникаций в большинстве стран СНГ. При этом многие компании до сих пор отвечают клиентам вручную, теряя до 68% потенциальных продаж из-за задержек в ответах.

В этой статье мы расскажем о трёх реальных кейсах клиентов Gneiro, которые смогли существенно увеличить продажи благодаря AI-автоматизации WhatsApp.

## Кейс 1: Интернет-магазин электроники

**Проблема:** Долгое время ответа в WhatsApp (в среднем 1,5 часа), высокий процент брошенных корзин.

**Решение Gneiro:**
- Мгновенные ответы на типовые вопросы о товарах
- Автоматическое уведомление о брошенных корзинах
- Интеграция с системой оплаты через WhatsApp

**Результат:** Конверсия в продажу выросла на 32%, средний чек увеличился на 15%.

## Кейс 2: Сеть салонов красоты

**Проблема:** Высокая нагрузка на администраторов, много пропущенных обращений в WhatsApp, частые отмены записей.

**Решение Gneiro:**
- Автоматическая запись на процедуры
- Умные напоминания о записи за день и за час
- Предложение перенести, а не отменить запись

**Результат:** Количество записей выросло на 41%, доля отмен снизилась с 28% до 8%.

## Кейс 3: Языковая школа

**Проблема:** Низкая конверсия из заявки в покупку курса, длительный процесс прогрева потенциальных клиентов.

**Решение Gneiro:**
- Автоматический квалификационный опрос
- Выдача бесплатных пробных материалов
- Постепенный прогрев с ценными советами по изучению языка

**Результат:** Конверсия из лида в покупателя выросла с 12% до 45%.

## Как работает AI-продавец в WhatsApp

1. **Мгновенно отвечает на сообщения** — клиенты получают ответ за 3 секунды вместо часов ожидания
2. **Понимает контекст и ведет осмысленный диалог** — ваши клиенты не чувствуют, что общаются с роботом
3. **Квалифицирует лиды** — задает важные вопросы и собирает информацию для продажи
4. **Передает разговор живому оператору** при необходимости — бот знает свои ограничения

## Почему именно сейчас стоит автоматизировать WhatsApp

- 89% людей предпочитают писать, а не звонить
- На сообщение открывается в среднем за 3 минуты после получения
- Среднее время ответа бизнеса — 1,7 часа, что критически много
- 62% потенциальных клиентов уходят, если не получают ответ в течение 15 минут

Gneiro позволяет запустить AI-продавца в WhatsApp всего за 5 минут, без программирования и сложных настроек. Попробуйте бесплатно сейчас — первые 7 дней работы бота бесплатны.',
    'https://images.pexels.com/photos/3182773/pexels-photo-3182773.jpeg',
    'Автоматизация',
    4,
    '2025-05-01T10:00:00Z'
  ),
  (
    'Интеграция чат-бота с CRM: пошаговое руководство',
    'chatbot-integration-guide',
    'Подробная инструкция по подключению Gneiro к популярным CRM-системам',
    '## Зачем интегрировать чат-бота с CRM-системой

Объединение чат-бота Gneiro с вашей CRM-системой позволяет:

1. **Автоматически создавать контакты и сделки** на основе диалогов в WhatsApp
2. **Сохранять полную историю переписки** для дальнейшей работы менеджеров
3. **Анализировать эффективность работы** бота и продаж в единой системе
4. **Автоматически запускать сценарии** обработки лидов в CRM

В этой статье мы разберем, как подключить Gneiro к наиболее популярным CRM-системам в СНГ.

## Интеграция с AmoCRM

### Шаг 1: Подготовка доступов в AmoCRM

1. Зайдите в настройки вашего аккаунта в AmoCRM
2. Перейдите в раздел API-ключи и OAuth
3. Создайте новую интеграцию с типом "Сервер"
4. Укажите URL для Callback: `https://app.gneiro.com/oauth/amocrm`
5. Скопируйте полученные client_id и client_secret

### Шаг 2: Подключение в панели Gneiro

1. В панели управления Gneiro перейдите в "Настройки" > "Интеграции" > "CRM"
2. Выберите AmoCRM
3. Вставьте скопированные client_id и client_secret
4. Нажмите "Авторизовать" и авторизуйте приложение
5. Настройте маппинг полей: какие данные из WhatsApp попадают в какие поля AmoCRM
6. Сохраните настройки

### Шаг 3: Настройка воронки и автоматизаций

1. Создайте отдельный статус в воронке для лидов из WhatsApp
2. Настройте автоматизации для новых лидов
3. Проверьте интеграцию, отправив тестовое сообщение

## Интеграция с Bitrix24

### Шаг 1: Подготовка webhook в Bitrix24

1. В Bitrix24 перейдите в "Приложения" > "Разработчикам"
2. Нажмите "Создать новый вебхук"
3. Выберите необходимые права доступа (CRM, Задачи, Пользователи)
4. Скопируйте сгенерированный URL вебхука

### Шаг 2: Настройка в Gneiro

1. В панели Gneiro перейдите в "Настройки" > "Интеграции" > "CRM"
2. Выберите Bitrix24
3. Вставьте URL вебхука
4. Настройте соответствие полей между WhatsApp и Bitrix24
5. Укажите, в какую воронку будут попадать лиды
6. Сохраните настройки

### Шаг 3: Тестирование и настройка бизнес-процессов

1. Отправьте тестовое сообщение в WhatsApp
2. Убедитесь, что лид создан в Bitrix24
3. Настройте автоматизацию для обработки новых лидов

## Интеграция через универсальный REST API

Если вы используете другую CRM-систему, вы можете интегрировать Gneiro через REST API.

### Шаг 1: Получение API-ключа Gneiro

1. В панели управления перейдите в "Настройки" > "API"
2. Сгенерируйте новый API-ключ
3. Скопируйте ключ и сохраните в надежном месте

### Шаг 2: Настройка веб-хуков для отправки данных

1. В разделе "Настройки" > "Интеграции" > "Webhooks"
2. Создайте новый webhook
3. Укажите URL вашей CRM-системы для приема данных
4. Настройте формат данных в соответствии с требованиями вашей CRM
5. Сохраните настройки

## Лучшие практики по интеграции

1. **Начинайте с тестового аккаунта** — отладьте интеграцию на тестовой среде
2. **Тщательно настройте маппинг полей** — это сэкономит время на исправлении ошибок
3. **Не забудьте про UTM-метки** — настройте их сохранение в CRM
4. **Настройте тэгирование** — помечайте лиды, которые пришли через WhatsApp
5. **Постройте отдельную воронку** — для клиентов из мессенджера могут понадобиться другие этапы

## Какие данные можно передавать в CRM

- Имя и контактные данные клиента
- История сообщений и ключевые точки диалога
- Интересующие товары/услуги
- Ответы на квалификационные вопросы
- Проблемы и возражения клиента
- Стадия принятия решения о покупке

Правильная интеграция чат-бота с CRM избавит ваших менеджеров от рутины и позволит сосредоточиться на важных задачах, требующих человеческого участия.',
    'https://images.pexels.com/photos/7563687/pexels-photo-7563687.jpeg',
    'Интеграции',
    6,
    '2025-04-15T14:30:00Z'
  ),
  (
    '7 приёмов для бизнес-аккаунта WhatsApp, которые повысят конверсию',
    'whatsapp-business-tips',
    'Практические советы по оптимизации бизнес-аккаунта WhatsApp для продаж',
    '## Как превратить WhatsApp в мощный инструмент продаж

WhatsApp Business давно стал одним из главных каналов коммуникации с клиентами. Однако многие компании до сих пор используют лишь базовый функционал, упуская возможности для увеличения продаж.

В этой статье мы разберем 7 проверенных приемов, которые помогут оптимизировать ваш бизнес-аккаунт WhatsApp и повысить конверсию.

## 1. Создайте профессиональный профиль

**Что улучшить:**
- Используйте узнаваемый логотип компании
- Добавьте полное описание бизнеса с ключевыми преимуществами
- Укажите часы работы и адрес (если есть офлайн-точки)
- Добавьте ссылку на ваш сайт и другие социальные сети

**Почему это важно:**
Профессиональный профиль повышает доверие клиентов на 34%. Согласно нашим исследованиям, подробное заполнение профиля увеличивает конверсию первичных обращений на 17%.

## 2. Настройте приветственное сообщение

**Как сделать эффективное приветствие:**
- Включите в текст название компании и основные услуги
- Укажите среднее время ответа
- Предложите 2-3 наиболее популярных запроса в виде быстрых вариантов ответа
- Персонализируйте сообщение под разные каналы привлечения

**Результаты применения:**
Правильное приветственное сообщение увеличивает продолжение диалога на 62% по сравнению с аккаунтами без приветствия.

## 3. Используйте быстрые ответы

**Как настроить:**
- Соберите 15-20 наиболее часто задаваемых вопросов
- Подготовьте краткие, но исчерпывающие ответы
- Добавьте в ответы призывы к действию
- Используйте эмодзи для выделения ключевых моментов

**Эффект от внедрения:**
Время ответа сокращается в среднем на 73%, а удовлетворенность клиентов повышается на 28%.

## 4. Создайте каталог товаров

**Как оптимизировать каталог:**
- Добавьте все ваши товары/услуги с ценами
- Используйте качественные фотографии
- Структурируйте каталог по категориям
- Регулярно обновляйте информацию

**Результаты:**
Наличие каталога повышает средний чек на 22% и ускоряет принятие решения о покупке в 2,5 раза.

## 5. Автоматизируйте ответы с помощью AI

**Возможности AI-автоматизации:**
- Мгновенные ответы на типовые вопросы
- Квалификация лидов с помощью чат-бота
- Персонализированные рекомендации на основе диалога
- Автоматическое создание заказов и записей

**Статистика эффективности:**
Клиенты Gneiro в среднем увеличивают конверсию на 45% и сокращают расходы на поддержку на 67%.

## 6. Внедрите шаблоны сообщений

**Типы эффективных шаблонов:**
- Подтверждение заказа
- Уведомление о доставке
- Напоминание о записи
- Информация о статусе заказа
- Предложения персональных скидок

**Преимущества:**
Шаблоны сообщений имеют на 38% более высокий показатель открытий по сравнению с обычными сообщениями и увеличивают повторные продажи на 25%.

## 7. Анализируйте статистику и оптимизируйте процессы

**На что обратить внимание:**
- Время ответа и его влияние на конверсию
- Эффективность различных типов сообщений
- Конверсия из обращения в продажу
- Показатель удовлетворенности клиентов

**Результаты анализа:**
Компании, регулярно оптимизирующие свои процессы на основе аналитики, демонстрируют на 31% лучшие результаты продаж через WhatsApp.

## Заключение

WhatsApp Business — это не просто канал коммуникации, а полноценный инструмент продаж. Применение описанных выше приемов поможет вам максимизировать его потенциал.

А если вы хотите автоматизировать процессы и внедрить AI-бота, который будет работать 24/7, обратите внимание на Gneiro — решение для создания продвинутых ботов для WhatsApp без программирования.',
    'https://images.pexels.com/photos/4549408/pexels-photo-4549408.jpeg',
    'Маркетинг',
    5,
    '2025-04-03T09:15:00Z'
  );